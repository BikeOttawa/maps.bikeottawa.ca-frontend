!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).MapboxDirections=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((er=arguments[1])instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(isUndefined(handler=this._events[type]))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),len=(listeners=handler.slice()).length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(length=(list=this._events[type]).length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(isFunction(listeners=this._events[type]))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){return this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},{}],2:[function(require,module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],3:[function(require,module,exports){"use strict";var isObj=require("is-obj"),hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function assignKey(to,from,key){var val=from[key];if(void 0!==val&&null!==val){if(hasOwnProperty.call(to,key)&&(void 0===to[key]||null===to[key]))throw new TypeError("Cannot convert undefined or null to object ("+key+")");hasOwnProperty.call(to,key)&&isObj(val)?to[key]=assign(Object(to[key]),from[key]):to[key]=val}}function assign(to,from){if(to===from)return to;for(var key in from=Object(from))hasOwnProperty.call(from,key)&&assignKey(to,from,key);if(Object.getOwnPropertySymbols)for(var symbols=Object.getOwnPropertySymbols(from),i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&assignKey(to,from,symbols[i]);return to}module.exports=function(target){target=function(val){if(null===val||void 0===val)throw new TypeError("Sources cannot be null or undefined");return Object(val)}(target);for(var s=1;s<arguments.length;s++)assign(target,arguments[s]);return target}},{"is-obj":4}],4:[function(require,module,exports){"use strict";module.exports=function(x){var type=typeof x;return null!==x&&("object"===type||"function"===type)}},{}],5:[function(require,module,exports){(function(global){var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectToString=Object.prototype.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function toNumber(value){if("number"==typeof value)return value;if(function(value){return"symbol"==typeof value||function(value){return!!value&&"object"==typeof value}(value)&&objectToString.call(value)==symbolTag}(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}module.exports=function(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function(time){var result=wait-(time-lastCallTime);return maxing?nativeMin(result,maxWait-(time-lastInvokeTime)):result}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function(){return void 0===timerId?result:trailingEdge(now())},debounced}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(require,module,exports){(function(global){var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function arraySome(array,predicate){for(var index=-1,length=array?array.length:0;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var uid,func,transform,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeKeys=(func=Object.keys,transform=Object,function(arg){return func(transform(arg))}),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function SetCache(values){var index=-1,length=values?values.length:0;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function Stack(entries){this.__data__=new ListCache(entries)}function arrayLikeKeys(value,inherited){var result=isArray(value)||function(value){return function(value){return isObjectLike(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseIsEqual(value,other,customizer,bitmask,stack){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!=value&&other!=other:function(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=(objTag=getTag(object))==argsTag?objectTag:objTag);othIsArr||(othTag=(othTag=getTag(other))==argsTag?objectTag:othTag);var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):function(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=UNORDERED_COMPARE_FLAG,stack.set(object,other);var result=equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack);return stack.delete(object),result;case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,equalFunc,customizer,bitmask,stack);if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack)}}if(!isSameTag)return!1;return stack||(stack=new Stack),function(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othLength=keys(other).length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,equalFunc,customizer,bitmask,stack)}(value,other,baseIsEqual,customizer,bitmask,stack))}function baseIsNative(value){return!(!isObject(value)||maskSrcKey&&maskSrcKey in value)&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(Ctor=(value=object)&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto,value!==proto)return nativeKeys(object);var value,Ctor,proto,result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack)))return seen.add(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,bitmask,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){return this.__data__[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this},ListCache.prototype.clear=function(){this.__data__=[]},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),0))},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){return getMapData(this,key).set(key,value),this},SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,HASH_UNDEFINED),this},SetCache.prototype.has=function(value){return this.__data__.has(value)},Stack.prototype.clear=function(){this.__data__=new ListCache},Stack.prototype.delete=function(key){return this.__data__.delete(key)},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this};var getTag=function(value){return objectToString.call(value)};function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function(func){return function(value){return func(value)}}(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]};function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=function(value,other){return baseIsEqual(value,other)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(require,module,exports){(function(global){var reInterpolate=require("lodash._reinterpolate"),templateSettings=require("lodash.templatesettings"),INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reIsUint=/^(?:0|[1-9]\d*)$/,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function baseValues(object,props){return function(array,iteratee){for(var index=-1,length=array?array.length:0,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}(props,function(key){return object[key]})}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}var func,transform,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeKeys=(func=Object.keys,transform=Object,function(arg){return func(transform(arg))}),nativeMax=Math.max,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function arrayLikeKeys(value,inherited){var result=isArray(value)||function(value){return function(value){return isObjectLike(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignInDefaults(objValue,srcValue,key,object){return void 0===objValue||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function baseKeysIn(object){if(!isObject(object))return function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseRest(func,start){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=array,apply(func,this,otherArgs)}}function baseToString(value){if("string"==typeof value)return value;if(function(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function eq(value,other){return value===other||value!=value&&other!=other}var isArray=Array.isArray;function isArrayLike(value){return null!=value&&function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}(value.length)&&!function(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}(value)}function isError(value){return!!isObjectLike(value)&&(objectToString.call(value)==errorTag||"string"==typeof value.message&&"string"==typeof value.name)}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}var assigner,assignInWith=(assigner=function(object,source,srcIndex,customizer){!function(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}}(source,function(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}(source),object,customizer)},baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object}));function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}var attempt=baseRest(function(func,args){try{return apply(func,void 0,args)}catch(e){return isError(e)?e:new Error(e)}});module.exports=function(string,options,guard){var value,settings=templateSettings.imports._.templateSettings||templateSettings;guard&&isIterateeCall(string,options,guard)&&(options=void 0),string=null==(value=string)?"":baseToString(value),options=assignInWith({},options,settings,assignInDefaults);var isEscaping,isEvaluating,imports=assignInWith({},options.imports,settings.imports,assignInDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g"),sourceURL="sourceURL"in options?"//# sourceURL="+options.sourceURL+"\n":"";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(isEscaping=!0,source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable;variable||(source="with (obj) {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(void 0,importsValues)});if(result.source=source,isError(result))throw result;return result}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._reinterpolate":8,"lodash.templatesettings":9}],8:[function(require,module,exports){module.exports=/<%=([\s\S]+?)%>/g},{}],9:[function(require,module,exports){(function(global){var reInterpolate=require("lodash._reinterpolate"),INFINITY=1/0,symbolTag="[object Symbol]",reUnescapedHtml=/[&<>"'`]/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source),freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();var object,escapeHtmlChar=(object={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(key){return null==object?void 0:object[key]}),objectToString=Object.prototype.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:{escape:function(string){return value=string,(string=null==value?"":function(value){if("string"==typeof value)return value;if(function(value){return"symbol"==typeof value||function(value){return!!value&&"object"==typeof value}(value)&&objectToString.call(value)==symbolTag}(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}(value))&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string;var value}}}};module.exports=templateSettings}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._reinterpolate":8}],10:[function(require,module,exports){"use strict";var polyline={};function encode(coordinate,factor){coordinate=Math.round(coordinate*factor),(coordinate<<=1)<0&&(coordinate=~coordinate);for(var output="";coordinate>=32;)output+=String.fromCharCode(63+(32|31&coordinate)),coordinate>>=5;return output+=String.fromCharCode(coordinate+63)}function flipped(coords){for(var flipped=[],i=0;i<coords.length;i++)flipped.push(coords[i].slice().reverse());return flipped}polyline.decode=function(str,precision){for(var latitude_change,index=0,lat=0,lng=0,coordinates=[],shift=0,result=0,byte=null,factor=Math.pow(10,precision||5);index<str.length;){byte=null,shift=0,result=0;do{result|=(31&(byte=str.charCodeAt(index++)-63))<<shift,shift+=5}while(byte>=32);latitude_change=1&result?~(result>>1):result>>1,shift=result=0;do{result|=(31&(byte=str.charCodeAt(index++)-63))<<shift,shift+=5}while(byte>=32);lat+=latitude_change,lng+=1&result?~(result>>1):result>>1,coordinates.push([lat/factor,lng/factor])}return coordinates},polyline.encode=function(coordinates,precision){if(!coordinates.length)return"";for(var factor=Math.pow(10,precision||5),output=encode(coordinates[0][0],factor)+encode(coordinates[0][1],factor),i=1;i<coordinates.length;i++){var a=coordinates[i],b=coordinates[i-1];output+=encode(a[0]-b[0],factor),output+=encode(a[1]-b[1],factor)}return output},polyline.fromGeoJSON=function(geojson,precision){if(geojson&&"Feature"===geojson.type&&(geojson=geojson.geometry),!geojson||"LineString"!==geojson.type)throw new Error("Input must be a GeoJSON LineString");return polyline.encode(flipped(geojson.coordinates),precision)},polyline.toGeoJSON=function(str,precision){return{type:"LineString",coordinates:flipped(polyline.decode(str,precision))}},"object"==typeof module&&module.exports&&(module.exports=polyline)},{}],11:[function(require,module,exports){"use strict";function createThunkMiddleware(extraArgument){return function(_ref){var dispatch=_ref.dispatch,getState=_ref.getState;return function(next){return function(action){return"function"==typeof action?action(dispatch,getState,extraArgument):next(action)}}}}exports.__esModule=!0;var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware,exports.default=thunk},{}],12:[function(require,module,exports){"use strict";exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};exports.default=function(){for(var _len=arguments.length,middlewares=Array(_len),_key=0;_key<_len;_key++)middlewares[_key]=arguments[_key];return function(createStore){return function(reducer,initialState,enhancer){var store=createStore(reducer,initialState,enhancer),_dispatch=store.dispatch,chain=[],middlewareAPI={getState:store.getState,dispatch:function(action){return _dispatch(action)}};return chain=middlewares.map(function(middleware){return middleware(middlewareAPI)}),_dispatch=_compose2.default.apply(void 0,chain)(store.dispatch),_extends({},store,{dispatch:_dispatch})}}};var obj,_compose=require("./compose"),_compose2=(obj=_compose)&&obj.__esModule?obj:{default:obj}},{"./compose":15}],13:[function(require,module,exports){"use strict";function bindActionCreator(actionCreator,dispatch){return function(){return dispatch(actionCreator.apply(void 0,arguments))}}exports.__esModule=!0,exports.default=function(actionCreators,dispatch){if("function"==typeof actionCreators)return bindActionCreator(actionCreators,dispatch);if("object"!=typeof actionCreators||null===actionCreators)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===actionCreators?"null":typeof actionCreators)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var keys=Object.keys(actionCreators),boundActionCreators={},i=0;i<keys.length;i++){var key=keys[i],actionCreator=actionCreators[key];"function"==typeof actionCreator&&(boundActionCreators[key]=bindActionCreator(actionCreator,dispatch))}return boundActionCreators}},{}],14:[function(require,module,exports){(function(process){"use strict";exports.__esModule=!0,exports.default=function(reducers){for(var reducerKeys=Object.keys(reducers),finalReducers={},i=0;i<reducerKeys.length;i++){var key=reducerKeys[i];"function"==typeof reducers[key]&&(finalReducers[key]=reducers[key])}var sanityError,finalReducerKeys=Object.keys(finalReducers);try{!function(reducers){Object.keys(reducers).forEach(function(key){var reducer=reducers[key],initialState=reducer(void 0,{type:_createStore.ActionTypes.INIT});if(void 0===initialState)throw new Error('Reducer "'+key+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var type="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===reducer(void 0,{type:type}))throw new Error('Reducer "'+key+"\" returned undefined when probed with a random type. Don't try to handle "+_createStore.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}(finalReducers)}catch(e){sanityError=e}return function(){var state=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],action=arguments[1];if(sanityError)throw sanityError;if("production"!==process.env.NODE_ENV){var warningMessage=function(inputState,reducers,action){var reducerKeys=Object.keys(reducers),argumentName=action&&action.type===_createStore.ActionTypes.INIT?"initialState argument passed to createStore":"previous state received by the reducer";if(0===reducerKeys.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!(0,_isPlainObject2.default)(inputState))return"The "+argumentName+' has unexpected type of "'+{}.toString.call(inputState).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+reducerKeys.join('", "')+'"';var unexpectedKeys=Object.keys(inputState).filter(function(key){return!reducers.hasOwnProperty(key)});if(unexpectedKeys.length>0)return"Unexpected "+(unexpectedKeys.length>1?"keys":"key")+' "'+unexpectedKeys.join('", "')+'" found in '+argumentName+'. Expected to find one of the known reducer keys instead: "'+reducerKeys.join('", "')+'". Unexpected keys will be ignored.'}(state,finalReducers,action);warningMessage&&(0,_warning2.default)(warningMessage)}for(var hasChanged=!1,nextState={},i=0;i<finalReducerKeys.length;i++){var key=finalReducerKeys[i],reducer=finalReducers[key],previousStateForKey=state[key],nextStateForKey=reducer(previousStateForKey,action);if(void 0===nextStateForKey){var errorMessage=getUndefinedStateErrorMessage(key,action);throw new Error(errorMessage)}nextState[key]=nextStateForKey,hasChanged=hasChanged||nextStateForKey!==previousStateForKey}return hasChanged?nextState:state}};var _createStore=require("./createStore"),_isPlainObject2=_interopRequireDefault(require("lodash/isPlainObject")),_warning2=_interopRequireDefault(require("./utils/warning"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getUndefinedStateErrorMessage(key,action){var actionType=action&&action.type;return"Given action "+(actionType&&'"'+actionType.toString()+'"'||"an action")+', reducer "'+key+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}}).call(this,require("_process"))},{"./createStore":16,"./utils/warning":18,_process:2,"lodash/isPlainObject":23}],15:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(){for(var _len=arguments.length,funcs=Array(_len),_key=0;_key<_len;_key++)funcs[_key]=arguments[_key];if(0===funcs.length)return function(arg){return arg};var _ret=(last=funcs[funcs.length-1],rest=funcs.slice(0,-1),{v:function(){return rest.reduceRight(function(composed,f){return f(composed)},last.apply(void 0,arguments))}});if("object"==typeof _ret)return _ret.v;var last,rest}},{}],16:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.ActionTypes=void 0,exports.default=function createStore(reducer,initialState,enhancer){var _ref2;"function"==typeof initialState&&void 0===enhancer&&(enhancer=initialState,initialState=void 0);if(void 0!==enhancer){if("function"!=typeof enhancer)throw new Error("Expected the enhancer to be a function.");return enhancer(createStore)(reducer,initialState)}if("function"!=typeof reducer)throw new Error("Expected the reducer to be a function.");var currentReducer=reducer;var currentState=initialState;var currentListeners=[];var nextListeners=currentListeners;var isDispatching=!1;function ensureCanMutateNextListeners(){nextListeners===currentListeners&&(nextListeners=currentListeners.slice())}function getState(){return currentState}function subscribe(listener){if("function"!=typeof listener)throw new Error("Expected listener to be a function.");var isSubscribed=!0;return ensureCanMutateNextListeners(),nextListeners.push(listener),function(){if(isSubscribed){isSubscribed=!1,ensureCanMutateNextListeners();var index=nextListeners.indexOf(listener);nextListeners.splice(index,1)}}}function dispatch(action){if(!(0,_isPlainObject2.default)(action))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===action.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(isDispatching)throw new Error("Reducers may not dispatch actions.");try{isDispatching=!0,currentState=currentReducer(currentState,action)}finally{isDispatching=!1}for(var listeners=currentListeners=nextListeners,i=0;i<listeners.length;i++)listeners[i]();return action}dispatch({type:ActionTypes.INIT});return _ref2={dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(nextReducer){if("function"!=typeof nextReducer)throw new Error("Expected the nextReducer to be a function.");currentReducer=nextReducer,dispatch({type:ActionTypes.INIT})}},_ref2[_symbolObservable2.default]=function(){var _ref,outerSubscribe=subscribe;return(_ref={subscribe:function(observer){if("object"!=typeof observer)throw new TypeError("Expected the observer to be an object.");function observeState(){observer.next&&observer.next(getState())}observeState();var unsubscribe=outerSubscribe(observeState);return{unsubscribe:unsubscribe}}})[_symbolObservable2.default]=function(){return this},_ref},_ref2};var _isPlainObject2=_interopRequireDefault(require("lodash/isPlainObject")),_symbolObservable2=_interopRequireDefault(require("symbol-observable"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActionTypes=exports.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":23,"symbol-observable":24}],17:[function(require,module,exports){(function(process){"use strict";exports.__esModule=!0,exports.compose=exports.applyMiddleware=exports.bindActionCreators=exports.combineReducers=exports.createStore=void 0;var _createStore2=_interopRequireDefault(require("./createStore")),_combineReducers2=_interopRequireDefault(require("./combineReducers")),_bindActionCreators2=_interopRequireDefault(require("./bindActionCreators")),_applyMiddleware2=_interopRequireDefault(require("./applyMiddleware")),_compose2=_interopRequireDefault(require("./compose")),_warning2=_interopRequireDefault(require("./utils/warning"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isCrushed(){}"production"!==process.env.NODE_ENV&&"string"==typeof isCrushed.name&&"isCrushed"!==isCrushed.name&&(0,_warning2.default)("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build."),exports.createStore=_createStore2.default,exports.combineReducers=_combineReducers2.default,exports.bindActionCreators=_bindActionCreators2.default,exports.applyMiddleware=_applyMiddleware2.default,exports.compose=_compose2.default}).call(this,require("_process"))},{"./applyMiddleware":12,"./bindActionCreators":13,"./combineReducers":14,"./compose":15,"./createStore":16,"./utils/warning":18,_process:2}],18:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(message){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(message);try{throw new Error(message)}catch(e){}}},{}],19:[function(require,module,exports){var getPrototype=require("./_overArg")(Object.getPrototypeOf,Object);module.exports=getPrototype},{"./_overArg":21}],20:[function(require,module,exports){module.exports=function(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}},{}],21:[function(require,module,exports){module.exports=function(func,transform){return function(arg){return func(transform(arg))}}},{}],22:[function(require,module,exports){module.exports=function(value){return!!value&&"object"==typeof value}},{}],23:[function(require,module,exports){var getPrototype=require("./_getPrototype"),isHostObject=require("./_isHostObject"),isObjectLike=require("./isObjectLike"),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString;module.exports=function(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},{"./_getPrototype":19,"./_isHostObject":20,"./isObjectLike":22}],24:[function(require,module,exports){(function(global){"use strict";module.exports=require("./ponyfill")(global||window||this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill":25}],25:[function(require,module,exports){"use strict";module.exports=function(root){var result,Symbol=root.Symbol;return"function"==typeof Symbol?Symbol.observable?result=Symbol.observable:(result=Symbol("observable"),Symbol.observable=result):result="@@observable",result}},{}],26:[function(require,module,exports){"use strict";var Suggestions=require("./src/suggestions");window.Suggestions=module.exports=Suggestions},{"./src/suggestions":29}],27:[function(require,module,exports){!function(){var fuzzy={};void 0!==exports?module.exports=fuzzy:this.fuzzy=fuzzy,fuzzy.simpleFilter=function(pattern,array){return array.filter(function(string){return fuzzy.test(pattern,string)})},fuzzy.test=function(pattern,string){return null!==fuzzy.match(pattern,string)},fuzzy.match=function(pattern,string,opts){opts=opts||{};var ch,patternIdx=0,result=[],len=string.length,totalScore=0,currScore=0,pre=opts.pre||"",post=opts.post||"",compareString=opts.caseSensitive&&string||string.toLowerCase();pattern=opts.caseSensitive&&pattern||pattern.toLowerCase();for(var idx=0;idx<len;idx++)ch=string[idx],compareString[idx]===pattern[patternIdx]?(ch=pre+ch+post,patternIdx+=1,currScore+=1+currScore):currScore=0,totalScore+=currScore,result[result.length]=ch;return patternIdx===pattern.length?{rendered:result.join(""),score:totalScore}:null},fuzzy.filter=function(pattern,arr,opts){return opts=opts||{},arr.reduce(function(prev,element,idx,arr){var str=element;opts.extract&&(str=opts.extract(element));var rendered=fuzzy.match(pattern,str,opts);return null!=rendered&&(prev[prev.length]={string:rendered.rendered,score:rendered.score,index:idx,original:element}),prev},[]).sort(function(a,b){var compare=b.score-a.score;return compare||a.index-b.index})}}()},{}],28:[function(require,module,exports){"Use strict";var List=function(component){return this.component=component,this.items=[],this.active=0,this.element=document.createElement("ul"),this.element.className="suggestions",component.el.parentNode.insertBefore(this.element,component.el.nextSibling),this};List.prototype.show=function(){this.element.style.display="block"},List.prototype.hide=function(){this.element.style.display="none"},List.prototype.add=function(item){this.items.push(item)},List.prototype.clear=function(){this.items=[],this.active=0},List.prototype.isEmpty=function(){return!this.items.length},List.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var i=0;i<this.items.length;i++)this.drawItem(this.items[i],this.active===i);this.show()}else this.hide()},List.prototype.drawItem=function(item,active){var li=document.createElement("li"),a=document.createElement("a");active&&(li.className+=" active"),a.innerHTML=item.string,li.appendChild(a),this.element.appendChild(li),li.addEventListener("mousedown",function(){this.handleMouseDown.call(this,item)}.bind(this))},List.prototype.handleMouseDown=function(item){this.component.value(item.original),this.clear(),this.draw()},List.prototype.move=function(index){this.active=index,this.draw()},List.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},List.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},module.exports=List},{}],29:[function(require,module,exports){"use strict";var extend=require("xtend"),fuzzy=require("fuzzy"),List=require("./list"),Suggestions=function(el,data,options){return options=options||{},this.options=extend({minLength:2,limit:10,filter:!1},options),this.el=el,this.data=data||[],this.list=new List(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(e){this.handleKeyUp(e.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(e){this.handleKeyDown(e)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this};Suggestions.prototype.handleKeyUp=function(keyCode){40!==keyCode&&38!==keyCode&&27!==keyCode&&13!==keyCode&&9!==keyCode&&(this.query=this.normalize(this.el.value),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(data){for(var i=0;i<data.length&&(this.list.add(data[i]),i!==this.options.limit-1);i++);this.list.draw()}.bind(this)))},Suggestions.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},Suggestions.prototype.handleBlur=function(){this.list.hide()},Suggestions.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show()},Suggestions.prototype.update=function(revisedData){this.data=revisedData,this.list.draw()},Suggestions.prototype.clear=function(){this.data=[],this.list.clear()},Suggestions.prototype.normalize=function(value){return value=value.toLowerCase()},Suggestions.prototype.match=function(candidate,query){return candidate.indexOf(query)>-1},Suggestions.prototype.value=function(value){if(this.selected=value,this.el.value=this.getItemValue(value),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},Suggestions.prototype.getCandidates=function(callback){var options={pre:"<strong>",post:"</strong>",extract:function(d){return this.getItemValue(d)}.bind(this)};callback(this.options.filter?fuzzy.filter(this.query,this.data,options):this.data.map(function(d){return{original:d,string:this.getItemValue(d).replace(new RegExp("("+this.query+")","ig"),function($1,match){return"<strong>"+match+"</strong>"})}}.bind(this)))},Suggestions.prototype.getItemValue=function(item){return item},module.exports=Suggestions},{"./list":28,fuzzy:27,xtend:32}],30:[function(require,module,exports){var each=require("turf-meta").coordEach;module.exports=function(layer){var extent=[1/0,1/0,-1/0,-1/0];return each(layer,function(coord){extent[0]>coord[0]&&(extent[0]=coord[0]),extent[1]>coord[1]&&(extent[1]=coord[1]),extent[2]<coord[0]&&(extent[2]=coord[0]),extent[3]<coord[1]&&(extent[3]=coord[1])}),extent}},{"turf-meta":31}],31:[function(require,module,exports){function coordEach(layer,callback,excludeWrapCoord){var i,j,k,g,geometry,stopG,coords,geometryMaybeCollection,isGeometryCollection,wrapShrink=0,isFeatureCollection="FeatureCollection"===layer.type,isFeature="Feature"===layer.type,stop=isFeatureCollection?layer.features.length:1;for(i=0;i<stop;i++)for(stopG=(isGeometryCollection="GeometryCollection"===(geometryMaybeCollection=isFeatureCollection?layer.features[i].geometry:isFeature?layer.geometry:layer).type)?geometryMaybeCollection.geometries.length:1,g=0;g<stopG;g++)if(coords=(geometry=isGeometryCollection?geometryMaybeCollection.geometries[g]:geometryMaybeCollection).coordinates,wrapShrink=!excludeWrapCoord||"Polygon"!==geometry.type&&"MultiPolygon"!==geometry.type?0:1,"Point"===geometry.type)callback(coords);else if("LineString"===geometry.type||"MultiPoint"===geometry.type)for(j=0;j<coords.length;j++)callback(coords[j]);else if("Polygon"===geometry.type||"MultiLineString"===geometry.type)for(j=0;j<coords.length;j++)for(k=0;k<coords[j].length-wrapShrink;k++)callback(coords[j][k]);else{if("MultiPolygon"!==geometry.type)throw new Error("Unknown Geometry Type");for(j=0;j<coords.length;j++)for(k=0;k<coords[j].length;k++)for(l=0;l<coords[j][k].length-wrapShrink;l++)callback(coords[j][k][l])}}function propEach(layer,callback){var i;switch(layer.type){case"FeatureCollection":for(features=layer.features,i=0;i<layer.features.length;i++)callback(layer.features[i].properties);break;case"Feature":callback(layer.properties)}}module.exports.coordEach=coordEach,module.exports.coordReduce=function(layer,callback,memo,excludeWrapCoord){return coordEach(layer,function(coord){memo=callback(memo,coord)},excludeWrapCoord),memo},module.exports.propEach=propEach,module.exports.propReduce=function(layer,callback,memo){return propEach(layer,function(prop){memo=callback(memo,prop)}),memo}},{}],32:[function(require,module,exports){module.exports=function(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var hasOwnProperty=Object.prototype.hasOwnProperty},{}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.queryOrigin=function(query){return{type:types.ORIGIN_QUERY,query:query}},exports.queryDestination=function(query){return{type:types.DESTINATION_QUERY,query:query}},exports.queryOriginCoordinates=queryOriginCoordinates,exports.queryDestinationCoordinates=queryDestinationCoordinates,exports.clearOrigin=function(){return function(dispatch){dispatch({type:types.ORIGIN_CLEAR}),dispatch(eventEmit("clear",{type:"origin"})),dispatch(setError(null))}},exports.clearDestination=function(){return function(dispatch){dispatch({type:types.DESTINATION_CLEAR}),dispatch(eventEmit("clear",{type:"destination"})),dispatch(setError(null))}},exports.setOptions=function(options){return{type:types.SET_OPTIONS,options:options}},exports.hoverMarker=function(coordinates){return function(dispatch){var feature=coordinates?_utils2.default.createPoint(coordinates,{id:"hover"}):{};dispatch(function(feature){return{type:types.HOVER_MARKER,hoverMarker:feature}}(feature))}},exports.setRouteIndex=setRouteIndex,exports.createOrigin=createOrigin,exports.createDestination=createDestination,exports.setProfile=function(profile){return function(dispatch,getState){var _getState4=getState(),origin=_getState4.origin,destination=_getState4.destination;dispatch({type:types.DIRECTIONS_PROFILE,profile:profile}),dispatch(eventEmit("profile",{profile:profile})),origin.geometry&&destination.geometry&&dispatch(fetchDirections())}},exports.reverse=function(){return function(dispatch,getState){var state=getState();state.destination.geometry&&dispatch(originPoint(state.destination.geometry.coordinates)),state.origin.geometry&&dispatch(destinationPoint(state.origin.geometry.coordinates)),state.origin.geometry&&state.destination.geometry&&dispatch(fetchDirections())}},exports.setOriginFromCoordinates=function(coords){return function(dispatch){if(_utils2.default.validCoords(coords)||(coords=[_utils2.default.wrap(coords[0]),_utils2.default.wrap(coords[1])]),isNaN(coords[0])&&isNaN(coords[1]))return dispatch(setError(new Error("Coordinates are not valid")));dispatch(queryOriginCoordinates(coords)),dispatch(createOrigin(coords))}},exports.setDestinationFromCoordinates=function(coords){return function(dispatch){if(_utils2.default.validCoords(coords)||(coords=[_utils2.default.wrap(coords[0]),_utils2.default.wrap(coords[1])]),isNaN(coords[0])&&isNaN(coords[1]))return dispatch(setError(new Error("Coordinates are not valid")));dispatch(createDestination(coords)),dispatch(queryDestinationCoordinates(coords))}},exports.addWaypoint=function(index,waypoint){return function(dispatch,getState){var _getState5=getState(),destination=_getState5.destination,waypoints=_getState5.waypoints;waypoints.splice(index,0,normalizeWaypoint(waypoint)),dispatch(updateWaypoints(waypoints)),destination.geometry&&dispatch(fetchDirections())}},exports.setWaypoint=function(index,waypoint){return function(dispatch,getState){var _getState6=getState(),destination=_getState6.destination,waypoints=_getState6.waypoints;waypoints[index]=normalizeWaypoint(waypoint),dispatch(updateWaypoints(waypoints)),destination.geometry&&dispatch(fetchDirections())}},exports.removeWaypoint=function(waypoint){return function(dispatch,getState){var _getState7=getState(),destination=_getState7.destination,waypoints=_getState7.waypoints;waypoints=waypoints.filter(function(way){return!_utils2.default.coordinateMatch(way,waypoint)}),dispatch(updateWaypoints(waypoints)),destination.geometry&&dispatch(fetchDirections())}},exports.eventSubscribe=function(type,fn){return function(dispatch,getState){var _getState8=getState(),events=_getState8.events;return events[type]=events[type]||[],events[type].push(fn),{type:types.EVENTS,events:events}}},exports.eventEmit=eventEmit;var obj,types=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(require("../constants/action_types")),_utils=require("../utils"),_utils2=(obj=_utils)&&obj.__esModule?obj:{default:obj};var request=new XMLHttpRequest;function originPoint(coordinates){return function(dispatch){var origin=_utils2.default.createPoint(coordinates,{id:"origin","marker-symbol":"A"});dispatch({type:types.ORIGIN,origin:origin}),dispatch(eventEmit("origin",{feature:origin}))}}function destinationPoint(coordinates){return function(dispatch){var destination=_utils2.default.createPoint(coordinates,{id:"destination","marker-symbol":"B"});dispatch({type:types.DESTINATION,destination:destination}),dispatch(eventEmit("destination",{feature:destination}))}}function setDirections(directions){return function(dispatch){dispatch({type:types.DIRECTIONS,directions:directions}),dispatch(eventEmit("route",{route:directions}))}}function updateWaypoints(waypoints){return{type:types.WAYPOINTS,waypoints:waypoints}}function fetchDirections(){return function(dispatch,getState){var _getState=getState(),api=_getState.api,accessToken=_getState.accessToken,routeIndex=_getState.routeIndex,profile=_getState.profile,query=function(state){var _state=state(),origin=_state.origin,destination=_state.destination,waypoints=_state.waypoints,query=[];query.push(origin.geometry.coordinates.join(",")),query.push(";"),waypoints.length&&waypoints.forEach(function(waypoint){query.push(waypoint.geometry.coordinates.join(",")),query.push(";")});return query.push(destination.geometry.coordinates.join(",")),encodeURIComponent(query.join(""))}(getState),options=[];options.push("geometries=polyline"),options.push("alternatives=true"),options.push("steps=true"),options.push("overview=full"),options.push("access_token="+accessToken),request.abort(),request.open("GET",api+"/"+profile+"/"+query+"?alternatives=true&steps=true&geometries=polyline&overview=full&annotations=true",!0),request.onload=function(){if(!(request.status>=200&&request.status<400))return dispatch(setDirections([])),dispatch(setError(JSON.parse(request.responseText).message));var data=JSON.parse(request.responseText);if(data.error)return dispatch(setDirections([])),dispatch(setError(data.error));dispatch(setError(null)),data.routes[routeIndex]||dispatch(setRouteIndex(0)),dispatch(setDirections(data.routes))},request.onerror=function(){return dispatch(setDirections([])),dispatch(setError(JSON.parse(request.responseText).message))},request.send()}}function normalizeWaypoint(waypoint){var properties={id:"waypoint"};return Object.assign(waypoint,{properties:waypoint.properties?Object.assign(waypoint.properties,properties):properties})}function setError(error){return function(dispatch){dispatch({type:"ERROR",error:error}),error&&dispatch(eventEmit("error",{error:error}))}}function queryOriginCoordinates(coords){return{type:types.ORIGIN_FROM_COORDINATES,coordinates:coords}}function queryDestinationCoordinates(coords){return{type:types.DESTINATION_FROM_COORDINATES,coordinates:coords}}function setRouteIndex(routeIndex){return{type:types.ROUTE_INDEX,routeIndex:routeIndex}}function createOrigin(coordinates){return function(dispatch,getState){var destination=getState().destination;dispatch(originPoint(coordinates)),destination.geometry&&dispatch(fetchDirections())}}function createDestination(coordinates){return function(dispatch,getState){var origin=getState().origin;dispatch(destinationPoint(coordinates)),origin.geometry&&dispatch(fetchDirections())}}function eventEmit(type,data){var _this=this;return function(dispatch,getState){var events=getState().events;if(!events[type])return{type:types.EVENTS,events:events};for(var listeners=events[type].slice(),i=0;i<listeners.length;i++)listeners[i].call(_this,data)}}},{"../constants/action_types":34,"../utils":42}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.DESTINATION="DESTINATION",exports.DESTINATION_CLEAR="DESTINATION_CLEAR",exports.DESTINATION_QUERY="DESTINATION_QUERY",exports.DESTINATION_FROM_COORDINATES="DESTINATION_FROM_COORDINATES",exports.DIRECTIONS="DIRECTIONS",exports.DIRECTIONS_PROFILE="DIRECTIONS_PROFILE",exports.EVENTS="EVENTS",exports.ERROR="ERROR",exports.HOVER_MARKER="HOVER_MARKER",exports.ORIGIN="ORIGIN",exports.ORIGIN_CLEAR="ORIGIN_CLEAR",exports.ORIGIN_QUERY="ORIGIN_QUERY",exports.ORIGIN_FROM_COORDINATES="ORIGIN_FROM_COORDINATES",exports.ROUTE_INDEX="ROUTE_INDEX",exports.SET_OPTIONS="SET_OPTIONS",exports.WAYPOINTS="WAYPOINTS"},{}],35:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_suggestions2=_interopRequireDefault(require("suggestions")),_lodash2=_interopRequireDefault(require("lodash.debounce")),_xtend2=_interopRequireDefault(require("xtend")),_events=require("events"),_utils2=_interopRequireDefault(require("../utils"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Geocoder(options){this._ev=new _events.EventEmitter,this.options=(0,_xtend2.default)({},this.options,options)}Geocoder.prototype={options:{placeholder:"Search",zoom:16,flyTo:!0},onAdd:function(map){this._map=map,this.request=new XMLHttpRequest;var el=document.createElement("div");el.className="mapboxgl-ctrl-geocoder";var icon=document.createElement("span");icon.className="geocoder-icon geocoder-icon-search";var input=this._inputEl=document.createElement("input");input.type="text",input.placeholder=this.options.placeholder,input.addEventListener("keydown",(0,_lodash2.default)(function(e){if(!e.target.value)return this._clearEl.classList.remove("active");e.metaKey||-1!==[9,27,37,39,13,38,40].indexOf(e.keyCode)||this._queryFromInput(e.target.value)}.bind(this)),200),input.addEventListener("change",function(e){e.target.value&&this._clearEl.classList.add("active");var selected=this._typeahead.selected;if(selected){if(this.options.flyTo)if(selected.bbox&&selected.context&&selected.context.length<=3||selected.bbox&&!selected.context){var bbox=selected.bbox;map.fitBounds([[bbox[0],bbox[1]],[bbox[2],bbox[3]]])}else map.flyTo({center:selected.center,zoom:this.options.zoom});this._input=selected,this.fire("result",{result:selected})}}.bind(this));var actions=document.createElement("div");actions.classList.add("geocoder-pin-right");var clear=this._clearEl=document.createElement("button");clear.className="geocoder-icon geocoder-icon-close",clear.addEventListener("click",this._clear.bind(this));var loading=this._loadingEl=document.createElement("span");return loading.className="geocoder-icon geocoder-icon-loading",actions.appendChild(clear),actions.appendChild(loading),el.appendChild(icon),el.appendChild(input),el.appendChild(actions),this.options.container&&(this.options.position=!1),this._typeahead=new _suggestions2.default(input,[],{filter:!1}),this._typeahead.getItemValue=function(item){return item.place_name},el},_nominatimGeocoder:function(query){const params={format:"json",q:query,limit:5,viewbox:"-76.36384,45.51697,-74.92326,45.03379",bounded:1},urlParams=new URLSearchParams(Object.entries(params));return fetch("//nominatim.openstreetmap.org/search?"+urlParams).then(function(response){return response.ok?response.json():[]}).then(function(json){return json.map(function(place){return{center:[place.lon,place.lat],geometry:{type:"Point",coordinates:[place.lon,place.lat]},place_name:place.display_name,properties:{},type:"Feature"}})})},_mapboxGeocoder:function(query){const params={access_token:this.options.accessToken?this.options.accessToken:mapboxgl.accessToken,bbox:"-76.385193,44.963826,-75.011902,45.614998",limit:5},urlParams=new URLSearchParams(Object.entries(params));return fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/"+encodeURIComponent(query.trim())+".json?"+urlParams).then(function(response){return response.ok?response.json():[]}).then(function(json){return json.features})},_geocode:function(q,callback){this._loadingEl.classList.add("active"),this.fire("loading");var customRequest=this._nominatimGeocoder(q),mapboxRequest=this._mapboxGeocoder(q);Promise.all([mapboxRequest,customRequest]).then(function(values){this._loadingEl.classList.remove("active");var res={};if(res.features=values[0].concat(values[1]),res.features.length)return this._clearEl.classList.add("active"),this.fire("results",{results:res.features}),this._typeahead.update(res.features),callback(res.features);this._clearEl.classList.remove("active"),this._typeahead.selected=null}.bind(this))},_queryFromInput:function(q){(q=q.trim())||this._clear(),q.length>2&&this._geocode(q,function(results){this._results=results}.bind(this))},_change:function(){var onChange=document.createEvent("HTMLEvents");onChange.initEvent("change",!0,!1),this._inputEl.dispatchEvent(onChange)},_query:function(input){input&&("object"===(void 0===input?"undefined":_typeof(input))&&input.length&&(input=[_utils2.default.wrap(input[0]),_utils2.default.wrap(input[1])].join()),this._geocode(input,function(results){if(results.length){var result=results[0];this._results=results,this._typeahead.selected=result,this._inputEl.value=result.place_name,this._change()}}.bind(this)))},_setInput:function(input){input&&("object"===(void 0===input?"undefined":_typeof(input))&&input.length&&(input=[_utils2.default.wrap(input[0]).toFixed(5),_utils2.default.wrap(input[1]).toFixed(5)].join()),this._inputEl.value=input,this._input=null,this._typeahead.selected=null,this._typeahead.clear(),this._change())},_clear:function(){this._input=null,this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._change(),this._inputEl.focus(),this._clearEl.classList.remove("active"),this.fire("clear")},getResult:function(){return this._input},query:function(_query2){return this._query(_query2),this},setInput:function(value){return this._setInput(value),this},on:function(type,fn){return this._ev.on(type,fn),this},fire:function(type,data){return this._ev.emit(type,data),this},off:function(type,fn){return this._ev.removeListener(type,fn),this}},module.exports=Geocoder},{"../utils":42,events:1,"lodash.debounce":5,suggestions:26,xtend:32}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_geocoder2=_interopRequireDefault(require("./geocoder")),_lodash2=_interopRequireDefault(require("lodash.template")),_lodash4=_interopRequireDefault(require("lodash.isequal")),_turfExtent2=_interopRequireDefault(require("turf-extent"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var tmpl=(0,_lodash2.default)("<div class='mapbox-directions-component mapbox-directions-inputs'>\n  <div class='mapbox-directions-component-keyline'>\n    <div class='mapbox-directions-origin'>\n      <label class='mapbox-form-label'>\n        <span class='directions-icon directions-icon-depart'></span>\n      </label>\n      <div id='mapbox-directions-origin-input'></div>\n    </div>\n\n    <button\n      class='directions-icon directions-icon-reverse directions-reverse js-reverse-inputs'\n      title='Reverse origin &amp; destination'>\n    </button>\n\n    <div class='mapbox-directions-destination'>\n      <label class='mapbox-form-label'>\n        <span class='directions-icon directions-icon-arrive'></span>\n      </label>\n      <div id='mapbox-directions-destination-input'></div>\n    </div>\n  </div>\n\n  <div class='mapbox-directions-profile mapbox-directions-component-keyline mapbox-directions-clearfix'><input\n      id='mapbox-directions-profile-lts1'\n      type='radio'\n      name='profile'\n      <% if (profile === 'lts1') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-lts1'>LTS-1</label>\n    <input\n      id='mapbox-directions-profile-lts2'\n      type='radio'\n      name='profile'\n      <% if (profile === 'lts2') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-lts2'>LTS-2</label>\n    <input\n      id='mapbox-directions-profile-lts3'\n      type='radio'\n      name='profile'\n      <% if (profile === 'lts3') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-lts3'>LTS-3</label>\n    <input\n      id='mapbox-directions-profile-lts4'\n      type='radio'\n      name='profile'\n      <% if (profile === 'lts4') { %>checked<% } %>\n    />\n    <label for='mapbox-directions-profile-lts4'>LTS-4</label>\n  </div>\n</div>\n"),Inputs=function(){function Inputs(el,store,actions,map){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Inputs);var _store$getState=store.getState(),originQuery=_store$getState.originQuery,destinationQuery=_store$getState.destinationQuery,profile=_store$getState.profile;el.innerHTML=tmpl({originQuery:originQuery,destinationQuery:destinationQuery,profile:profile}),this.container=el,this.actions=actions,this.store=store,this._map=map,this.onAdd(),this.render()}return _createClass(Inputs,[{key:"animateToCoordinates",value:function(mode,coords){var _store$getState2=this.store.getState(),origin=_store$getState2.origin,destination=_store$getState2.destination;if(origin.geometry&&destination.geometry&&!(0,_lodash4.default)(origin.geometry,destination.geometry)){var bb=(0,_turfExtent2.default)({type:"FeatureCollection",features:[origin,destination]});this._map.fitBounds([[bb[0],bb[1]],[bb[2],bb[3]]],{padding:150})}else this._map.flyTo({center:coords})}},{key:"onAdd",value:function(){var _this=this,_actions=this.actions,clearOrigin=_actions.clearOrigin,clearDestination=_actions.clearDestination,createOrigin=_actions.createOrigin,createDestination=_actions.createDestination,setProfile=_actions.setProfile,reverse=_actions.reverse,_store$getState3=this.store.getState(),geocoder=_store$getState3.geocoder,accessToken=_store$getState3.accessToken;this.originInput=new _geocoder2.default(Object.assign({},{flyTo:!1,placeholder:"Choose a starting place",accessToken:accessToken,bbox:[-76.403046,45.05024,-75.101166,45.582329]},geocoder));var originEl=this.originInput.onAdd();this.container.querySelector("#mapbox-directions-origin-input").appendChild(originEl),this.destinationInput=new _geocoder2.default(Object.assign({},{flyTo:!1,placeholder:"Choose destination",accessToken:accessToken,bbox:[-76.403046,45.05024,-75.101166,45.582329]},geocoder));var destinationEl=this.destinationInput.onAdd();this.container.querySelector("#mapbox-directions-destination-input").appendChild(destinationEl),this.originInput.on("result",function(e){var coords=e.result.center;createOrigin(coords),_this.animateToCoordinates("origin",coords)}),this.originInput.on("clear",clearOrigin),this.destinationInput.on("result",function(e){var coords=e.result.center;createDestination(coords),_this.animateToCoordinates("destination",coords)}),this.destinationInput.on("clear",clearDestination);var profiles=this.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(profiles,function(el){el.addEventListener("change",function(){setProfile(el.id.replace("mapbox-directions-profile-",""))})}),this.container.querySelector(".js-reverse-inputs").addEventListener("click",function(){var _store$getState4=_this.store.getState(),origin=_store$getState4.origin,destination=_store$getState4.destination;origin&&_this.actions.queryDestination(origin.geometry.coordinates),destination&&_this.actions.queryOrigin(destination.geometry.coordinates),reverse()})}},{key:"render",value:function(){var _this2=this;this.store.subscribe(function(){var _store$getState5=_this2.store.getState(),originQuery=_store$getState5.originQuery,destinationQuery=_store$getState5.destinationQuery,originQueryCoordinates=_store$getState5.originQueryCoordinates,destinationQueryCoordinates=_store$getState5.destinationQueryCoordinates;originQuery&&(_this2.originInput.query(originQuery),_this2.actions.queryOrigin(null)),destinationQuery&&(_this2.destinationInput.query(destinationQuery),_this2.actions.queryDestination(null)),originQueryCoordinates&&(_this2.originInput.setInput(originQueryCoordinates),_this2.animateToCoordinates("origin",originQueryCoordinates),_this2.actions.queryOriginCoordinates(null)),destinationQueryCoordinates&&(_this2.destinationInput.setInput(destinationQueryCoordinates),_this2.animateToCoordinates("destination",destinationQueryCoordinates),_this2.actions.queryDestinationCoordinates(null))})}}]),Inputs}();exports.default=Inputs},{"./geocoder":35,"lodash.isequal":6,"lodash.template":7,"turf-extent":30}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_utils2=_interopRequireDefault(require("../utils")),_lodash2=_interopRequireDefault(require("lodash.template")),_lodash4=_interopRequireDefault(require("lodash.isequal"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var instructionsTemplate=(0,_lodash2.default)("<div class='directions-control directions-control-directions'>\n  <div onclick='document.getElementById(\"instructions\").classList.toggle(\"closed\");' class='mapbox-directions-component mapbox-directions-route-summary<% if (routes > 1) { %> mapbox-directions-multiple<% } %>'>\n    <% if (routes > 1) { %>\n    <div class='mapbox-directions-routes mapbox-directions-clearfix'>\n      <% for (var i = 0; i < routes; i++) { %>\n        <input type='radio' name='routes' id='<%= i %>' <% if (i === routeIndex) { %>checked<% } %>>\n        <label for='<%= i %>' class='mapbox-directions-route'><%= i + 1 %></label>\n      <% } %>\n    </div>\n    <% } %>\n    <h1><%- duration %></h1>\n    <span><%- distance %></span>\n  </div>\n\n  <div id='instructions' class='mapbox-directions-instructions'>\n    <div class='mapbox-directions-instructions-wrapper'>\n      <ol class='mapbox-directions-steps'>\n        <% steps.forEach(function(step) { %>\n          <%\n            var distance = step.distance ? format(step.distance) : false;\n            var icon = step.maneuver.modifier ? step.maneuver.modifier.replace(/\\s+/g, '-').toLowerCase() : step.maneuver.type.replace(/\\s+/g, '-').toLowerCase();\n\n            if (step.maneuver.type === 'arrive' || step.maneuver.type === 'depart') {\n              icon = step.maneuver.type;\n            }\n\n            if (step.maneuver.type === 'roundabout' || step.maneuver.type === 'rotary') {\n              icon= 'roundabout';\n            }\n\n            var lng = step.maneuver.location[0];\n            var lat = step.maneuver.location[1];\n          %>\n          <li\n            data-lat='<%= lat %>'\n            data-lng='<%= lng %>'\n            class='mapbox-directions-step'>\n            <span class='directions-icon directions-icon-<%= icon %>'></span>\n            <div class='mapbox-directions-step-maneuver'>\n               <% if (step.maneuver.type === 'arrive') { %>Arrive<%}else {if (step.maneuver.type === 'depart') { %>Start<%}else{%>Keep<%}%> <%= step.mode %><%= step.maneuver.instruction %>  <%  if(step.name){%>on <%= step.name %><%}  }%>\n            </div>\n            <% if (distance) { %>\n              <div class='mapbox-directions-step-distance'>\n                <%= distance %>\n              </div>\n            <% } %>\n          </li>\n        <% }); %>\n      </ol>\n    </div>\n  </div>\n</div>\n"),errorTemplate=(0,_lodash2.default)("<div class='directions-control directions-control-directions'>\n  <div class='mapbox-directions-error'>\n    <%= error %>\n  </div>\n</div>\n"),Instructions=function(){function Instructions(el,store,actions,map){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Instructions),this.container=el,this.actions=actions,this.store=store,this._map=map,this.directions={},this.render()}return _createClass(Instructions,[{key:"render",value:function(){var _this=this;this.store.subscribe(function(){var _actions=_this.actions,hoverMarker=_actions.hoverMarker,setRouteIndex=_actions.setRouteIndex,_store$getState=_this.store.getState(),routeIndex=_store$getState.routeIndex,unit=_store$getState.unit,directions=_store$getState.directions,error=_store$getState.error,shouldRender=!(0,_lodash4.default)(directions[routeIndex],_this.directions);if(error)_this.container.innerHTML=errorTemplate({error:error});else if(directions.length&&shouldRender){var direction=_this.directions=directions[routeIndex];_this.container.innerHTML=instructionsTemplate({routeIndex:routeIndex,routes:directions.length,steps:direction.legs[0].steps,format:_utils2.default.format[unit],duration:_utils2.default.format[unit](direction.distance),distance:_utils2.default.format.duration(direction.duration)});var steps=_this.container.querySelectorAll(".mapbox-directions-step");Array.prototype.forEach.call(steps,function(el){var lng=el.getAttribute("data-lng"),lat=el.getAttribute("data-lat");el.addEventListener("mouseover",function(){hoverMarker([lng,lat])}),el.addEventListener("mouseout",function(){hoverMarker(null)}),el.addEventListener("click",function(){_this._map.flyTo({center:[lng,lat],zoom:16})})});var routes=_this.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(routes,function(el){el.addEventListener("change",function(e){setRouteIndex(parseInt(e.target.id,10))})})}else _this.container.innerHTML&&shouldRender&&(_this.container.innerHTML="")})}}]),Instructions}();exports.default=Instructions},{"../utils":42,"lodash.isequal":6,"lodash.template":7}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_redux=require("redux"),_reduxThunk2=_interopRequireDefault(require("redux-thunk")),_polyline=require("polyline"),_utils2=_interopRequireDefault(require("./utils")),_reducers2=_interopRequireDefault(require("./reducers")),actions=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(require("./actions")),_directions_style2=_interopRequireDefault(require("./directions_style")),_inputs2=_interopRequireDefault(require("./controls/inputs")),_instructions2=_interopRequireDefault(require("./controls/instructions"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var store=(0,_redux.applyMiddleware)(_reduxThunk2.default)(_redux.createStore)(_reducers2.default),MapboxDirections=function(){function MapboxDirections(options){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MapboxDirections),this.actions=(0,_redux.bindActionCreators)(actions,store.dispatch),this.actions.setOptions(options||{}),this.options=options||{},this.onDragDown=this._onDragDown.bind(this),this.onDragMove=this._onDragMove.bind(this),this.onDragUp=this._onDragUp.bind(this),this.move=this._move.bind(this),this.onClick=this._onClick.bind(this)}return _createClass(MapboxDirections,[{key:"onAdd",value:function(map){var _this=this;this._map=map;var controls=store.getState().controls,el=this.container=document.createElement("div");el.className="mapboxgl-ctrl-directions mapboxgl-ctrl";var inputEl=document.createElement("div");inputEl.className="directions-control directions-control-inputs",new _inputs2.default(inputEl,store,this.actions,this._map);var directionsEl=document.createElement("div");return directionsEl.className="directions-control directions-control-instructions",new _instructions2.default(directionsEl,store,{hoverMarker:this.actions.hoverMarker,setRouteIndex:this.actions.setRouteIndex},this._map),controls.inputs&&el.appendChild(inputEl),controls.instructions&&el.appendChild(directionsEl),this.subscribedActions(),this._map.loaded()?this.mapState():this._map.on("load",function(){return _this.mapState()}),el}},{key:"onRemove",value:function(map){return this.container.parentNode.removeChild(this.container),this.removeRoutes(),map.off("mousedown",this.onDragDown),map.off("mousemove",this.move),map.off("touchstart",this.onDragDown),map.off("touchstart",this.move),map.off("click",this.onClick),this.storeUnsubscribe&&(this.storeUnsubscribe(),delete this.storeUnsubscribe),this._map=null,this}},{key:"mapState",value:function(){var _this2=this,_store$getState2=store.getState(),profile=_store$getState2.profile,styles=_store$getState2.styles,interactive=_store$getState2.interactive;this.actions.eventEmit("profile",{profile:profile});this._map.addSource("directions",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),_directions_style2.default.forEach(function(style){return _this2._map.addLayer(style)}),styles&&styles.length&&styles.forEach(function(style){return _this2._map.addLayer(style)}),interactive&&(this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick),this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown))}},{key:"subscribedActions",value:function(){var _this3=this;this.storeUnsubscribe=store.subscribe(function(){var _store$getState3=store.getState(),origin=_store$getState3.origin,destination=_store$getState3.destination,hoverMarker=_store$getState3.hoverMarker,directions=_store$getState3.directions,routeIndex=_store$getState3.routeIndex,geojson={type:"FeatureCollection",features:[origin,destination,hoverMarker].filter(function(d){return d.geometry})};directions.length&&directions.forEach(function(feature,index){var lineString={geometry:{type:"LineString",coordinates:(0,_polyline.decode)(feature.geometry,5).map(function(c){return c.reverse()})},properties:{"route-index":index,route:index===routeIndex?"selected":"alternate"}};geojson.features.push(lineString),index===routeIndex&&feature.legs[0].steps.forEach(function(d){"waypoint"===d.maneuver.type&&geojson.features.push({type:"Feature",geometry:d.maneuver.location,properties:{id:"waypoint"}})})}),_this3._map.style&&_this3._map.getSource("directions")&&_this3._map.getSource("directions").setData(geojson)})}},{key:"_onClick",value:function(e){var _this4=this,origin=store.getState().origin,coords=[e.lngLat.lng,e.lngLat.lat];if(origin.geometry){var features=this._map.queryRenderedFeatures(e.point,{layers:["directions-origin-point","directions-destination-point","directions-waypoint-point","directions-route-line-alt"]});if(features.length){if(features.forEach(function(f){"directions-waypoint-point"===f.layer.id&&_this4.actions.removeWaypoint(f)}),"alternate"===features[0].properties.route){var index=features[0].properties["route-index"];this.actions.setRouteIndex(index)}}else this.actions.setDestinationFromCoordinates(coords),this._map.flyTo({center:coords})}else this.actions.setOriginFromCoordinates(coords)}},{key:"_move",value:function(e){var _this5=this,hoverMarker=store.getState().hoverMarker,features=this._map.queryRenderedFeatures(e.point,{layers:["directions-route-line-alt","directions-route-line","directions-origin-point","directions-destination-point","directions-hover-point"]});this._map.getCanvas().style.cursor=features.length?"pointer":"",features.length?(this.isCursorOverPoint=features[0],this._map.dragPan.disable(),features.forEach(function(feature){"directions-route-line"===feature.layer.id?_this5.actions.hoverMarker([e.lngLat.lng,e.lngLat.lat]):hoverMarker.geometry&&_this5.actions.hoverMarker(null)})):this.isCursorOverPoint&&(this.isCursorOverPoint=!1,this._map.dragPan.enable())}},{key:"_onDragDown",value:function(){this.isCursorOverPoint&&(this.isDragging=this.isCursorOverPoint,this._map.getCanvas().style.cursor="grab",this._map.on("mousemove",this.onDragMove),this._map.on("mouseup",this.onDragUp),this._map.on("touchmove",this.onDragMove),this._map.on("touchend",this.onDragUp))}},{key:"_onDragMove",value:function(e){if(this.isDragging){var coords=[e.lngLat.lng,e.lngLat.lat];switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.createOrigin(coords);break;case"directions-destination-point":this.actions.createDestination(coords);break;case"directions-hover-point":this.actions.hoverMarker(coords)}}}},{key:"_onDragUp",value:function(){if(this.isDragging){var _store$getState6=store.getState(),hoverMarker=_store$getState6.hoverMarker,origin=_store$getState6.origin,destination=_store$getState6.destination;switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.setOriginFromCoordinates(origin.geometry.coordinates);break;case"directions-destination-point":this.actions.setDestinationFromCoordinates(destination.geometry.coordinates);break;case"directions-hover-point":hoverMarker.geometry&&!_utils2.default.coordinateMatch(this.isDragging,hoverMarker)&&this.actions.addWaypoint(0,hoverMarker)}this.isDragging=!1,this._map.getCanvas().style.cursor="",this._map.off("touchmove",this.onDragMove),this._map.off("touchend",this.onDragUp),this._map.off("mousemove",this.onDragMove),this._map.off("mouseup",this.onDragUp)}}},{key:"interactive",value:function(state){return state?(this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown),this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick)):(this._map.off("touchstart",this.move),this._map.off("touchstart",this.onDragDown),this._map.off("mousedown",this.onDragDown),this._map.off("mousemove",this.move),this._map.off("click",this.onClick)),this}},{key:"getOrigin",value:function(){return store.getState().origin}},{key:"setOrigin",value:function(query){return"string"==typeof query?this.actions.queryOrigin(query):this.actions.setOriginFromCoordinates(query),this}},{key:"getDestination",value:function(){return store.getState().destination}},{key:"setDestination",value:function(query){return"string"==typeof query?this.actions.queryDestination(query):this.actions.setDestinationFromCoordinates(query),this}},{key:"reverse",value:function(){return this.actions.reverse(),this}},{key:"addWaypoint",value:function(index,waypoint){return waypoint.type||(waypoint=_utils2.default.createPoint(waypoint,{id:"waypoint"})),this.actions.addWaypoint(index,waypoint),this}},{key:"setWaypoint",value:function(index,waypoint){return waypoint.type||(waypoint=_utils2.default.createPoint(waypoint,{id:"waypoint"})),this.actions.setWaypoint(index,waypoint),this}},{key:"removeWaypoint",value:function(index){var waypoints=store.getState().waypoints;return this.actions.removeWaypoint(waypoints[index]),this}},{key:"getWaypoints",value:function(){return store.getState().waypoints}},{key:"removeRoutes",value:function(){return this.actions.clearOrigin(),this.actions.clearDestination(),this}},{key:"on",value:function(type,fn){return this.actions.eventSubscribe(type,fn),this}}]),MapboxDirections}();exports.default=MapboxDirections},{"./actions":33,"./controls/inputs":36,"./controls/instructions":37,"./directions_style":39,"./reducers":41,"./utils":42,polyline:10,redux:17,"redux-thunk":11}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=[{id:"directions-route-line-alt",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#bbb","line-width":5,"line-opacity":.9},filter:["all",["in","$type","LineString"],["in","route","alternate"]]},{id:"directions-route-line",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#9c27e4","line-width":5,"line-opacity":.6},filter:["all",["in","$type","LineString"],["in","route","selected"]]},{id:"directions-hover-point-casing",type:"circle",source:"directions",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-hover-point",type:"circle",source:"directions",paint:{"circle-radius":6,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-waypoint-point-casing",type:"circle",source:"directions",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-waypoint-point",type:"circle",source:"directions",paint:{"circle-radius":6,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-origin-point",type:"circle",source:"directions",paint:{"circle-radius":10,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-origin-label",type:"symbol",source:"directions",layout:{"text-field":"A","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-destination-point",type:"circle",source:"directions",paint:{"circle-radius":10,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]},{id:"directions-destination-label",type:"symbol",source:"directions",layout:{"text-field":"B","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]}]},{}],40:[function(require,module,exports){"use strict";var obj,_directions=require("./directions"),_directions2=(obj=_directions)&&obj.__esModule?obj:{default:obj};module.exports=_directions2.default},{"./directions":38}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,types=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(require("../constants/action_types.js")),_deepAssign=require("deep-assign"),_deepAssign2=(obj=_deepAssign)&&obj.__esModule?obj:{default:obj};var initialState={api:"https://api.mapbox.com/directions/v5/",profile:"lts4",unit:"metric",proximity:!1,styles:[],controls:{inputs:!0,instructions:!0},geocoder:{},interactive:!0,events:{},origin:{},destination:{},hoverMarker:{},waypoints:[],originQuery:null,destinationQuery:null,originQueryCoordinates:null,destinationQueryCoordinates:null,directions:[],routeIndex:0};exports.default=function(){var state=arguments.length<=0||void 0===arguments[0]?initialState:arguments[0],action=arguments[1];switch(action.type){case types.SET_OPTIONS:return(0,_deepAssign2.default)({},state,action.options);case types.DIRECTIONS_PROFILE:return Object.assign({},state,{profile:action.profile});case types.ORIGIN:return Object.assign({},state,{origin:action.origin,hoverMarker:{}});case types.DESTINATION:return Object.assign({},state,{destination:action.destination,hoverMarker:{}});case types.HOVER_MARKER:return Object.assign({},state,{hoverMarker:action.hoverMarker});case types.WAYPOINTS:return Object.assign({},state,{waypoints:action.waypoints});case types.ORIGIN_QUERY:return Object.assign({},state,{originQuery:action.query});case types.DESTINATION_QUERY:return Object.assign({},state,{destinationQuery:action.query});case types.ORIGIN_FROM_COORDINATES:return Object.assign({},state,{originQueryCoordinates:action.coordinates});case types.DESTINATION_FROM_COORDINATES:return Object.assign({},state,{destinationQueryCoordinates:action.coordinates});case types.ORIGIN_CLEAR:return Object.assign({},state,{origin:{},originQuery:"",waypoints:[],directions:[]});case types.DESTINATION_CLEAR:return Object.assign({},state,{destination:{},destinationQuery:"",waypoints:[],directions:[]});case types.DIRECTIONS:return Object.assign({},state,{directions:action.directions});case types.ROUTE_INDEX:return Object.assign({},state,{routeIndex:action.routeIndex});case types.ERROR:return Object.assign({},state,{error:action.error});default:return state}}},{"../constants/action_types.js":34,"deep-assign":3}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var format={duration:function(s){var m=Math.floor(s/60),h=Math.floor(m/60);return s%=60,m%=60,0===h&&0===m?s+"s":0===h?m+"min":h+"h "+m+"min"},imperial:function(m){var mi=m/1609.344;return mi>=100?mi.toFixed(0)+"mi":mi>=10?mi.toFixed(1)+"mi":mi>=.1?mi.toFixed(2)+"mi":(5280*mi).toFixed(0)+"ft"},metric:function(m){return m>=1e5?(m/1e3).toFixed(0)+"km":m>=1e4?(m/1e3).toFixed(1)+"km":m>=100?(m/1e3).toFixed(2)+"km":m.toFixed(0)+"m"}};exports.default={format:format,coordinateMatch:function(a,b){return a=a.geometry.coordinates,b=b.geometry.coordinates,a.join()===b.join()||a[0].toFixed(3)===b[0].toFixed(3)&&a[1].toFixed(3)===b[1].toFixed(3)},createPoint:function(coordinates,properties){return{type:"Feature",geometry:{type:"Point",coordinates:coordinates},properties:properties||{}}},validCoords:function(coords){return coords[0]>=-180&&coords[0]<=180&&coords[1]>=-90&&coords[1]<=90},wrap:function(n){var w=((n- -180)%360+360)%360-180;return-180===w?180:w}}},{}]},{},[40])(40)});
